---
title: Função IGR – Estado de Interligação de GRBE’s e Redes Externas
type: docs
weight: 1
---

     
# 1 - Descrição dos Parâmetros
     
     
## 1.1 Primeiro Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 3 bytes | Função da PONTE MONITOR que esta sendo solicitada: IGR. |
| 1 byte | Código de retorno da PONTE MONITOR. |
| 8 bytes | Nome da entidade que tratará a função: GRBE. |
<!-- Tabela Fim -->

     
## 1.2 Segundo Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 3 bytes | Função a ser processada. Poderá ser:* PAG = informa se o MONITOR responsável pela instituição/agência está ativo ou não. * AGE = Informa qual o MONITOR é responsável pela instituição/agência, o seu status (ativo ou não) e os grupos a que este MONITOR pertence. * INS = Informa qual a instituição responsável pela agência consultada. |
| 1 byte | Código de retorno da função ‘IGR’ |
| 8 bytes | Layout indicativo de multi-instituição: “1” (seguido de 07 caracteres brancos). |
<!-- Tabela Fim -->

     
## 1.3 Terceiro Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 6 bytes | Código da instituição |
| 4 bytes | Código de retorno da função ‘IGR’ |
<!-- Tabela Fim -->

     
## 2.4 Quarto Parâmetro
     
Apenas para a opção - "AGE"

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 4 bytes | identificação do MONITOR (Exemplo.: SP01, OP02, etc). |
| 1 byte | Status da interligação:“A” – Instiuição/Agência processa neste MONITOR.“B” – Outro MONITOR e conexão está ativa.“C” – Outro MONITOR e conexão está inativa.“D” – Instituição/Agência solicitada inválida. |
| 3 bytes | 1° grupo a que este MONITOR pertence. |
| 3 bytes | 2° grupo a que este MONITOR pertence. |
| 3 bytes | 3° grupo a que este MONITOR pertence. |
| 3 bytes | 4° grupo a que este MONITOR pertence. |
| 3 bytes | 5° grupo a que este MONITOR pertence. |
<!-- Tabela Fim -->

     
# 2 - Códigos de Retorno
     
O código de retorno da função IGR vira no quarto byte do segundo parâmetro.
Este poderá' conter os seguintes valores quando o programa retomar o controle apos a chamada desta ponte:
     
## Opção PAG
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| **Código de Retorno** | **Descrição** |
| **A** | Agência pesquisada pertence a esta CPU. |
| **B** | Agência pesquisada pertence a outra CPU e a comunicação entre os GRBE’s esta ativa (permite geração com G/J). |
| **C** | Agência pesquisada pertence a outra CPU e não há comunicação entre os GRBE’s (geração com G/J não funcionará. |
| **D** | Agência/CPU não consta da tabela. |
<!-- Tabela Fim -->

     
## Opção AGE
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| **Código de Retorno** | **Descrição** |
| **A** | Processamento normal. |
| **Y** | Problema com a tabela de endereçamento da rede (MTER). |
| **D** | Sema AGÊNCIA OU CPU na MTER. |
| **Z** | Opção inválida.. |
<!-- Tabela Fim -->

     
## Opção INS
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| **Código de Retorno** | **Descrição** |
| **A** | Processamento normal. |
| **Y** | Problema com a tabela de endereçamento da rede (MTER). |
| **D** | Sem AGÊNCIA ou CPU na MTER. |
| **Z** | Opção inválida. |
<!-- Tabela Fim -->

 1. No primeiro parâmetro está o código de retorno da Ponte "Monitor" informando o status de processamento da ponte.
2. Os códigos acima retornam no segundo parâmetro.
3. Caso a instituição-agência passada no terceiro parâmetro não seja encontrada, o monitor tentará procurar a agência com outra instituição válida. Caso encontrada, será retornado o código dessa instituição no terceiro parâmetro, com o código de retorno "A".
Exemplo de utilização da função XXX
 **Exemplo 01**
```
DATA DIVISION
WORKING-STORAGE SECTION.
01 WMONIT.
03 WEXEC PIC X(03) VALUE 'IGR'.
03 WRET-COD-MONIT PIC X.
03 WENTID PIC X(08) VALUE 'GRBE'.
01 WOPCP.
03 WFUNC PIC X(03).
03 WRET-COD-FUN PIC X.
03 WLAY-OUT PIC X(08) value '1 '.
01 WINFP.
03 WINST PIC X(06).
03 WAGEN PIC X(04).
PROCEDURE DIVISION
MOVE 'PAG' TO WFUNC
MOVE '004341' TO WINST
MOVE '1500' TO WAGEN
CALL 'MONITOR' USING WMONIT WOPCP WINFP
 IF WRET-COD-MONIT = A
 a Ponte Monitor executou sem erros
 ELSE
 houve erro no processamento da Ponte Monitor.
tratar aqui o return code da função solicitada.
```
     
# 4. Chamada Antiga
     
     
## 4.1 Parâmetros
     
     
### Primeiro Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 3 bytes | Função da PONTE MONITOR que esta sendo solicitada: IGR. |
| 1 byte | Código de retorno da PONTE MONITOR. |
| 8 bytes | Nome da entidade que tratará a função: GRBE. |
<!-- Tabela Fim -->

     
### Segundo Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 3 bytes | Função a ser processada. Poderá ser:* PAG – Informa se a CPU responsável pela agência esta ativa ou não. * AGE – Informa qual a CPU responsável pela agência, o seu status (ativa ou não) e os grupos a que esta CPU pertence. |
| 1 byte | Código de retorno da função ‘IGR’ |
| 4 bytes | Nome da agência a ser pesquisada. |
<!-- Tabela Fim -->

     
### Terceiro Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 4 bytes | identificação da CPU (por exemplo: SP01, OP02, etc.) |
| 1 byte | Status da interligação:“A” – Instiuição/Agência processa neste CPU.“B” – Outro CPU e conexão está ativa.“C” – Outro CPU e conexão está inativa.“D” – Agência solicitada inválida. |
| 3 bytes | 1° grupo a que este CPU pertence. |
| 3 bytes | 2° grupo a que este CPU pertence. |
| 3 bytes | 3° grupo a que este CPU pertence. |
| 3 bytes | 4° grupo a que este CPU pertence. |
| 3 bytes | 5° grupo a que este CPU pertence. |
<!-- Tabela Fim -->

     
### Quarto Parâmetro
     

<!-- Tabela Início -->
|     |     |
| --- | --- |
| 4 bytes | Identificação da INSTITUIÇÃO:* 4341 – Itaú (dafault) * 4346 - BFB |
<!-- Tabela Fim -->

**Função PAG - Exemplo 02**
```
DATA DIVISION
WORKING-STORAGE SECTION.
01 WMONIT.
03 WEXEC PIC X(03) VALUE 'IGR'.
03 WRET-COD-MONIT PIC X.
03 WENTID PIC X(08) VALUE 'GRBE'.
01 WINFP.
03 WFUNC PIC X(03).
03 WRET-COD-FUN PIC X.
03 WCOD PIC X(04).
PROCEDURE DIVISION
MOVE 'PAG' TO WFUNC
MOVE '1500' TO WCOD
CALL 'MONITOR' USING WMONIT WINFP
IF WRET-COD-MONIT = A
 a Ponte Monitor executou sem erros
ELSE
 houve erro no processamento da Ponte Monitor.
```